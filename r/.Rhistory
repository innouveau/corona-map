group = group,
fill = `rel_increase_7d`
), color = COLOR.border, lwd=.1) +
coord_sf(xlim = c(-200000, 300000), ylim = c(300000, 600000)) +
labs(
title = TEXT.label.main,
subtitle = TEXT.label.sub,
caption = "Created by: @innouveau"
) +
theme(
legend.position = c(0.15,0.7),
legend.key = element_rect(colour = "transparent", fill = "white"),
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
axis.text = element_blank(),
panel.background = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = COLOR.background, color = NA),
plot.title = element_text(family = "montserrat-black", size = 29, vjust = -0.2),
plot.subtitle = element_text(family = "montserrat-bold", size = 18, vjust = 0.1),
plot.caption = element_text(family = "montserrat-regular", size = 9, hjust = 0)
) +
scale_fill_gradientn(colours=c("white","yellow","orange", "red"))
# https://github.com/mzelst/covid-19/blob/master/plot_scripts/daily_maps_plots.R
# https://www.r-graph-gallery.com/327-chloropleth-map-from-geojson-with-ggplot2.html
library(jsonlite)
library(geojsonio)
library(sp)
library(ggplot2)
library(broom)
library(sysfonts)
library(showtext)
library(dplyr)
COLOR.border <- rgb(0, 0, 0, max = 255, alpha = 50)
COLOR.background <- "#f5eedc"
COLOR.text <- "#000000"
GEO.municipalities <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/data/gemeentegrenzen2020.geojson"
FONT.black <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Black.ttf"
FONT.bold <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Bold.ttf"
FONT.regular <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Regular.ttf"
TEXT.label.main <- "Corona Status"
Sys.setlocale("LC_TIME", "nl_NL")
TEXT.label.sub <- format(Sys.time(), "%A %d %b")
DATA.municipalities <- read.csv("https://raw.githubusercontent.com/mzelst/covid-19/master/data/municipality-today-detailed.csv")
font_add(family = "montserrat-black", regular = FONT.black)
font_add(family = "montserrat-bold", regular = FONT.bold)
showtext_auto()
# prepair data
DATA.stripped <- DATA.municipalities[,c("Municipality_code","rel_increase_1d","rel_increase_7d")]
colnames(DATA.stripped)[1] <- "statcode"
# map
gemeentegrenzen <- geojson_read(GEO.municipalities,  what = "sp")
gemeentegrenzen@data <- gemeentegrenzen@data %>%
left_join(DATA.stripped,by=c("statcode"))
g <- fortify(gemeentegrenzen, region = "id")
gemeentegrenzenDF <- merge(g, gemeentegrenzen@data, by = "id")
ggplot(data = gemeentegrenzenDF) +
geom_polygon(aes(
x = long,
y = lat,
group = group,
fill = `rel_increase_7d`
), color = COLOR.border, lwd=.1) +
coord_sf(xlim = c(-200000, 300000), ylim = c(300000, 600000)) +
labs(
title = TEXT.label.main,
subtitle = TEXT.label.sub,
caption = "Created by: @innouveau"
) +
theme(
legend.position = c(0.15,0.7),
legend.key = element_rect(colour = "transparent", fill = "transparent"),
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
axis.text = element_blank(),
panel.background = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = COLOR.background, color = NA),
plot.title = element_text(family = "montserrat-black", size = 29, vjust = -0.2),
plot.subtitle = element_text(family = "montserrat-bold", size = 18, vjust = 0.1),
plot.caption = element_text(family = "montserrat-regular", size = 9, hjust = 0)
) +
scale_fill_gradientn(colours=c("white","yellow","orange", "red"))
# https://github.com/mzelst/covid-19/blob/master/plot_scripts/daily_maps_plots.R
# https://www.r-graph-gallery.com/327-chloropleth-map-from-geojson-with-ggplot2.html
library(jsonlite)
library(geojsonio)
library(sp)
library(ggplot2)
library(broom)
library(sysfonts)
library(showtext)
library(dplyr)
COLOR.border <- rgb(0, 0, 0, max = 255, alpha = 50)
COLOR.background <- "#f5eedc"
COLOR.text <- "#000000"
GEO.municipalities <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/data/gemeentegrenzen2020.geojson"
FONT.black <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Black.ttf"
FONT.bold <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Bold.ttf"
FONT.regular <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Regular.ttf"
TEXT.label.main <- "Corona Status"
Sys.setlocale("LC_TIME", "nl_NL")
TEXT.label.sub <- format(Sys.time(), "%A %d %b")
DATA.municipalities <- read.csv("https://raw.githubusercontent.com/mzelst/covid-19/master/data/municipality-today-detailed.csv")
font_add(family = "montserrat-black", regular = FONT.black)
font_add(family = "montserrat-bold", regular = FONT.bold)
showtext_auto()
# prepair data
DATA.stripped <- DATA.municipalities[,c("Municipality_code","rel_increase_1d","rel_increase_7d")]
colnames(DATA.stripped)[1] <- "statcode"
# map
gemeentegrenzen <- geojson_read(GEO.municipalities,  what = "sp")
gemeentegrenzen@data <- gemeentegrenzen@data %>%
left_join(DATA.stripped,by=c("statcode"))
g <- fortify(gemeentegrenzen, region = "id")
gemeentegrenzenDF <- merge(g, gemeentegrenzen@data, by = "id")
ggplot(data = gemeentegrenzenDF) +
geom_polygon(aes(
x = long,
y = lat,
group = group,
fill = `rel_increase_7d`
), color = COLOR.border, lwd=.1) +
coord_sf(xlim = c(-200000, 300000), ylim = c(300000, 600000)) +
labs(
title = TEXT.label.main,
subtitle = TEXT.label.sub,
caption = "Created by: @innouveau"
) +
theme(
legend.position = c(0.15,0.7),
legend.key = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
axis.text = element_blank(),
panel.background = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = COLOR.background, color = NA),
plot.title = element_text(family = "montserrat-black", size = 29, vjust = -0.2),
plot.subtitle = element_text(family = "montserrat-bold", size = 18, vjust = 0.1),
plot.caption = element_text(family = "montserrat-regular", size = 9, hjust = 0)
) +
scale_fill_gradientn(colours=c("white","yellow","orange", "red"))
# https://github.com/mzelst/covid-19/blob/master/plot_scripts/daily_maps_plots.R
# https://www.r-graph-gallery.com/327-chloropleth-map-from-geojson-with-ggplot2.html
library(jsonlite)
library(geojsonio)
library(sp)
library(ggplot2)
library(broom)
library(sysfonts)
library(showtext)
library(dplyr)
COLOR.border <- rgb(0, 0, 0, max = 255, alpha = 50)
COLOR.background <- "#f5eedc"
COLOR.text <- "#000000"
GEO.municipalities <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/data/gemeentegrenzen2020.geojson"
FONT.black <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Black.ttf"
FONT.bold <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Bold.ttf"
FONT.regular <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r/assets/fonts/montserrat/Montserrat-Regular.ttf"
TEXT.label.main <- "Corona Status"
Sys.setlocale("LC_TIME", "nl_NL")
TEXT.label.sub <- format(Sys.time(), "%A %d %b")
DATA.municipalities <- read.csv("https://raw.githubusercontent.com/mzelst/covid-19/master/data/municipality-today-detailed.csv")
font_add(family = "montserrat-black", regular = FONT.black)
font_add(family = "montserrat-bold", regular = FONT.bold)
showtext_auto()
# prepair data
DATA.stripped <- DATA.municipalities[,c("Municipality_code","rel_increase_1d","rel_increase_7d")]
colnames(DATA.stripped)[1] <- "statcode"
# map
gemeentegrenzen <- geojson_read(GEO.municipalities,  what = "sp")
gemeentegrenzen@data <- gemeentegrenzen@data %>%
left_join(DATA.stripped,by=c("statcode"))
g <- fortify(gemeentegrenzen, region = "id")
gemeentegrenzenDF <- merge(g, gemeentegrenzen@data, by = "id")
ggplot(data = gemeentegrenzenDF) +
geom_polygon(aes(
x = long,
y = lat,
group = group,
fill = `rel_increase_7d`
), color = COLOR.border, lwd=.1) +
coord_sf(xlim = c(-200000, 300000), ylim = c(300000, 600000)) +
labs(
title = TEXT.label.main,
subtitle = TEXT.label.sub,
caption = "Created by: @innouveau"
) +
theme(
legend.position = c(0.15,0.7),
legend.key = element_blank(),
axis.line = element_blank(),
axis.ticks = element_blank(),
axis.title = element_blank(),
axis.text = element_blank(),
panel.background = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = COLOR.background, color = NA),
plot.title = element_text(family = "montserrat-black", size = 29, vjust = -0.2),
plot.subtitle = element_text(family = "montserrat-bold", size = 18, vjust = 0.1),
plot.caption = element_text(family = "montserrat-regular", size = 9, hjust = 0)
) +
scale_fill_gradientn(colours=c("white","yellow","orange", "red"))
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
View(DATA.rivm)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
View(DATA.municipalities)
View(DATA.municipalities)
View(DATA.municipalities)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
DATA.stripped <- DATA.municipalities[,c("Municipality_code","Municipality_name","population")]
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
View(DATA.stripped)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
DATA.stripped <- DATA.municipalities[,c("Municipality_code","Municipality_name","population")]
write.csv(DATA.stripped, file="filename.municipality",row.names = F)
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
View(DATA.municipalities)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
View(DATA.municipalities)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
DATA.joined <- DATA.municipalities %>%
left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
library(dplyr)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
DATA.joined <- DATA.municipalities %>%
left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
View(DATA.joined)
View(DATA.cases)
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
install.packages("sqldf")
library(sqldf)
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"))
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=T)
DATA.municipalities <- read.csv(paste0(project_path, "/data/municipalities.csv"), header=T)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=T)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=T)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"))
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
View(DATA.cases)
View(DATA.cases)
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";")
municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"))
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(cases$Date_of_report))
x = sqldf("
SELECT *
FROM cases d1 JOIN municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=FALSE)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=FALSE)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=FALSE)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=FALSE)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
View(DATA.cases)
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=TRUE)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=TRUE)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
View(DATA.cases)
View(DATA.cases)
View(DATA.cases)
View(DATA.cases)
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
setwd(project_path)
# DATA.rivm <- read.csv(paste0(project_path, "/data/COVID-19_aantallen_gemeente_cumulatief.csv"), sep=";")
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=TRUE)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=TRUE)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x = sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=TRUE)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=TRUE)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x <- sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
detach("package:RSQLite", unload = TRUE)
library(RSQLite)
install_github("ggrothendieck/sqldf")
install.packages("install_github")
install.packages("devtools")
devtools::install_github("ggrothendieck/sqldf")
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=TRUE)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=TRUE)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x <- sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
detach("package:sqldf", unload = TRUE)
library(sqldf)
library(dplyr)
library(sqldf)
#https://github.com/mzelst/covid-19/blob/master/workflow/parse_municipalities.R
project_path <- "/Users/jeroen/Documents/_work/innouveau/projects/innouveau/corona-map/dev/r"
DATA.cases <- read.table(paste0(project_path, "/data/COVID-19_aantallen_gemeente_per_dag.csv"), sep=";", header=TRUE)
DATA.municipalities <- read.table(paste0(project_path, "/data/municipalities.csv"), header=TRUE)
# DATA.joined <- DATA.municipalities %>%
#   left_join(DATA.cases,by=c("Municipality_code"))
# today <- last_date <- as.Date(last(DATA.rivm$Date_of_report))
x <- sqldf("
SELECT *
FROM DATA.cases d1 JOIN DATA.municipalities d2
ON Municipality_code = Municipality_code
AND d1.Date_of_publication == '2021-01-27'
")
